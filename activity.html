<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ES TEAMS ACTIVITY LOGS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Animation for heading */
        @keyframes marquee {
            from { transform: translateX(100%); }
            to { transform: translateX(-100%); }
        }

        .marquee {
            white-space: nowrap;
            overflow: hidden;
            display: inline-block;
            animation: marquee 8s linear infinite;
        }

        /* Profile image frame */
        .profile-frame {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid cyan;
        }

        /* Green blinking dot */
        @keyframes blink {
            50% { opacity: 0; }
        }

        .blinking-dot {
            width: 10px;
            height: 10px;
            background-color: limegreen;
            border-radius: 50%;
            animation: blink 1s infinite;
        }

        /* Glowing log out button */
        .logout-btn {
            background-color: red;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px red;
            transition: transform 0.2s;
        }

        .logout-btn:hover {
            transform: scale(1.1);
        }

        /* Global Information Section */
        .global-info {
            margin-top: 20px;
            text-align: center;
        }

        /* Device Information Box */
        .device-info-box {
            @apply bg-gray-800 text-white p-5 rounded-lg shadow-lg my-5;
        }

        /* Activity Log Box */
        .activity-log-box {
            @apply bg-gray-800 text-white p-5 rounded-lg shadow-lg max-h-72 overflow-y-scroll my-5;
        }

        /* Spacing for activity logs */
        .activity-item {
            @apply bg-gray-700 p-3 rounded-md mb-3 cursor-pointer;
        }

        .activity-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .copy-btn {
            background-color: transparent;
            border: none;
            color: cyan;
            cursor: pointer;
            font-size: 0.875rem;
            text-decoration: underline;
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen p-5">

    <!-- Top Section -->
    <div class="w-full flex justify-between items-center px-5">
        <!-- Back Button -->
        <button onclick="logActivity('Navigated to Home'); window.location.href='index.html'" class="text-3xl">&#8592;</button>

        <!-- Profile Picture -->
        <div class="profile-frame">
            <img id="profile-img" src="" alt="Profile" class="w-full h-full object-cover">
        </div>
    </div>

    <!-- Heading -->
    <h1 class="text-3xl font-bold text-cyan-400 mt-5 marquee">𝗘𝗦 𝗧𝗘𝗔𝗠𝗦 𝗔𝗖𝗧𝗜𝗩𝗜𝗧𝗬 𝗟𝗢𝗚𝗦</h1>
    <p class="text-lg text-gray-300 mt-2">Welcome to your activity log where you see all your current progress.</p>

    <!-- Device Information Box -->
    <div class="device-info-box">
        <p id="date" class="text-gray-400">Date: --/--/----</p>
        <p id="time" class="text-gray-400">Time: --:--:--</p>
        <p id="uptime" class="text-gray-400">Uptime: 00:00:00</p>
    </div>

    <!-- Activity Log Box -->
    <div class="activity-log-box" id="activity-log">
        <!-- Activities will be added dynamically here -->
    </div>

    <!-- Log Out Button -->
    <button onclick="logout()" class="logout-btn fixed bottom-5 right-5">𝗟𝗢𝗚 𝗢𝗨𝗧</button>

    <!-- JavaScript -->
    <script>
        let startTime = Date.now(); // To calculate uptime

        // Function to update date, time, and uptime every second
        function updateDateTime() {
            let now = new Date();
            let date = now.toLocaleDateString();
            let time = now.toLocaleTimeString();
            let uptime = formatUptime(Date.now() - startTime);

            document.getElementById("date").textContent = `Date: ${date}`;
            document.getElementById("time").textContent = `Time: ${time}`;
            document.getElementById("uptime").textContent = `Uptime: ${uptime}`;
        }

        // Function to format uptime in HH:MM:SS
        function formatUptime(ms) {
            let seconds = Math.floor(ms / 1000);
            let minutes = Math.floor(seconds / 60);
            let hours = Math.floor(minutes / 60);
            seconds = seconds % 60;
            minutes = minutes % 60;

            return `${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;
        }

        // Function to pad single digits with leading zeros
        function pad(num) {
            return num < 10 ? '0' + num : num;
        }

        // Load profile image from local storage
        function loadProfileImage() {
            let userData = JSON.parse(localStorage.getItem("userData")) || {};
            if (userData.profilePic) {
                document.getElementById("profile-img").src = userData.profilePic;
            } else {
                document.getElementById("profile-img").src = "https://via.placeholder.com/80"; // Default placeholder
            }
        }

        // Load activity log from local storage
        function loadActivityLog() {
            let activities = JSON.parse(localStorage.getItem("activityLog")) || [];
            let logContainer = document.getElementById("activity-log");
            logContainer.innerHTML = ""; // Clear previous logs

            if (activities.length === 0) {
                logContainer.innerHTML = "<p class='text-gray-400'>No activities yet.</p>";
                return;
            }

            activities.forEach(activity => {
                let activityItem = document.createElement("div");
                activityItem.className = "activity-item";
                activityItem.innerHTML = `
                    <span>${activity}</span>
                    <button class="copy-btn" onclick="copyToClipboard('${activity}')">Copy</button>
                `;
                logContainer.appendChild(activityItem);
            });
        }

        // Log activity
        function logActivity(action) {
            let activities = JSON.parse(localStorage.getItem("activityLog")) || [];
            let timestamp = new Date().toLocaleTimeString();
            activities.unshift(`${action} at ${timestamp}`); // Add new activity at the top
            localStorage.setItem("activityLog", JSON.stringify(activities));
            loadActivityLog(); // Refresh activity log
        }

        // Track user interactions (buttons, clicks, etc.)
        document.addEventListener("click", function (event) {
            if (event.target.tagName === "BUTTON") {
                logActivity(`Clicked ${event.target.innerText}`);
            }
        });

        // Log page visit
        logActivity("Visited Activity Log");

        // Log out function
        function logout() {
            localStorage.removeItem("activityLog"); // Clear activity log on logout
            window.location.href = "index.html"; // Redirect to index.html
        }

        // Function to copy activity to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert("Activity copied to clipboard!");
            }).catch(err => {
                console.error("Failed to copy text: ", err);
            });
        }

        // Run functions on page load
        loadProfileImage();
        loadActivityLog();
        setInterval(updateDateTime, 1000); // Update date, time, and uptime every second
    </script>

</body>
</html>