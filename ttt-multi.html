<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1a1a1a, #3a3a3a);
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 5px;
            margin: 20px auto;
        }

        .cell {
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            border: 2px solid white;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .win {
            background-color: rgba(0, 255, 0, 0.5);
            animation: flash 0.5s alternate infinite;
        }

        @keyframes flash {
            from { background-color: rgba(0, 255, 0, 0.5); }
            to { background-color: rgba(0, 255, 0, 0.8); }
        }

        .scoreboard {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .score-box {
            display: grid;
            grid-template-columns: repeat(10, 30px);
            gap: 5px;
        }

        .score-box div {
            width: 30px;
            height: 30px;
            border: 2px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .winner-check {
            background-color: lime;
        }

        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            font-size: 2rem;
            font-weight: bold;
            color: white;
            border-radius: 10px;
            display: none;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen">

    <!-- Back Arrow -->
    <div class="absolute top-2 left-2">
        <button onclick="location.href='games.html'" class="text-white text-2xl">â¬…</button>
    </div>

    <!-- Player Name Input -->
    <div id="name-input">
        <h2 class="text-xl mb-2">Enter Player Names:</h2>
        <input type="text" id="playerA" placeholder="Player A" class="text-black p-2 m-2">
        <input type="text" id="playerB" placeholder="Player B" class="text-black p-2 m-2">
        <button onclick="startGame()" class="bg-blue-500 text-white p-2 rounded">Start Game</button>
    </div>

    <!-- Game Info -->
    <div id="game-container" class="hidden">
        <h2 id="player-info" class="text-xl mt-4"></h2>

        <!-- Game Board -->
        <div class="game-board">
            <div class="cell" onclick="makeMove(0)"></div>
            <div class="cell" onclick="makeMove(1)"></div>
            <div class="cell" onclick="makeMove(2)"></div>
            <div class="cell" onclick="makeMove(3)"></div>
            <div class="cell" onclick="makeMove(4)"></div>
            <div class="cell" onclick="makeMove(5)"></div>
            <div class="cell" onclick="makeMove(6)"></div>
            <div class="cell" onclick="makeMove(7)"></div>
            <div class="cell" onclick="makeMove(8)"></div>
        </div>

        <!-- Scoreboard -->
        <div class="scoreboard">
            <div>
                <h3 id="x-player">X: </h3>
                <div class="score-box" id="x-score"></div>
            </div>
            <div>
                <h3 id="o-player">O: </h3>
                <div class="score-box" id="o-score"></div>
            </div>
        </div>
    </div>

    <!-- Popup -->
    <div id="popup" class="popup"></div>

    <script>
        let board = Array(9).fill("");
        let players = {};
        let currentPlayer;
        let scores = { X: 0, O: 0 };

        function startGame() {
            let playerA = document.getElementById("playerA").value || "Player A";
            let playerB = document.getElementById("playerB").value || "Player B";

            // Assign symbols randomly
            if (Math.random() < 0.5) {
                players.X = playerA;
                players.O = playerB;
            } else {
                players.X = playerB;
                players.O = playerA;
            }

            currentPlayer = "X";  
            document.getElementById("x-player").textContent = `X: ${players.X}`;
            document.getElementById("o-player").textContent = `O: ${players.O}`;
            document.getElementById("player-info").textContent = `${players[currentPlayer]}'s turn (${currentPlayer})`;

            // Hide name input and show game
            document.getElementById("name-input").style.display = "none";
            document.getElementById("game-container").style.display = "block";

            resetBoard();
        }

        function makeMove(index) {
            if (board[index]) return;

            board[index] = currentPlayer;
            updateBoard();

            if (checkWin()) {
                scores[currentPlayer]++;
                updateScoreboard();

                if (scores[currentPlayer] === 10) {
                    showPopup(`${players[currentPlayer]} ( ${currentPlayer} ) is the Overall Winner!`);
                    setTimeout(() => location.href = "games.html", 3000);
                    return;
                }

                setTimeout(resetBoard, 1500);
            } else if (!board.includes("")) {
                showPopup("It's a Draw!");
                setTimeout(resetBoard, 1500);
            } else {
                currentPlayer = currentPlayer === "X" ? "O" : "X";
                document.getElementById("player-info").textContent = `${players[currentPlayer]}'s turn (${currentPlayer})`;
            }
        }

        function updateBoard() {
            document.querySelectorAll(".cell").forEach((cell, i) => {
                cell.textContent = board[i];
                cell.style.color = board[i] === "X" ? "blue" : "red";
            });
        }

        function checkWin() {
            for (let [a, b, c] of [[0,1,2], [3,4,5], [6,7,8], [0,3,6], [1,4,7], [2,5,8], [0,4,8], [2,4,6]]) {
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    [a, b, c].forEach(i => document.querySelectorAll(".cell")[i].classList.add("win"));
                    showPopup(`${players[currentPlayer]} Wins!`);
                    return true;
                }
            }
            return false;
        }

        function resetBoard() {
            board.fill("");
            document.querySelectorAll(".cell").forEach(cell => {
                cell.textContent = "";
                cell.classList.remove("win");
            });
        }

        function updateScoreboard() {
            document.getElementById("x-score").innerHTML = Array(scores.X).fill("ðŸŸ©").map(() => "<div class='winner-check'></div>").join("");
            document.getElementById("o-score").innerHTML = Array(scores.O).fill("ðŸŸ©").map(() => "<div class='winner-check'></div>").join("");
        }

        function showPopup(message) {
            document.getElementById("popup").textContent = message;
            document.getElementById("popup").style.display = "block";
            setTimeout(() => document.getElementById("popup").style.display = "none", 2000);
        }
    </script>

</body>
</html>